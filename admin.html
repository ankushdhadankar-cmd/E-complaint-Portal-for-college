<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<h2>Admin Dashboard</h2>
<div id="complaintList"></div>

<script>

// Restrict access
if (localStorage.getItem("role") !== "admin") {
    alert("Access Denied");
    window.location.href = "login.html";
}

function loadComplaints() {
    let complaints = JSON.parse(localStorage.getItem("complaints")) || [];
    const list = document.getElementById("complaintList");
    list.innerHTML = "";

    complaints.forEach((c, index) => {
        list.innerHTML += `
            <div style="border:1px solid #ccc; padding:10px; margin:10px;">
                <p><b>Name:</b> ${c.name}</p>
                <p><b>Complaint:</b> ${c.complaint}</p>
                <p><b>Status:</b> ${c.status}</p>

                <select onchange="updateStatus(${index}, this.value)">
                    <option ${c.status==="Pending"?"selected":""}>Pending</option>
                    <option ${c.status==="In Progress"?"selected":""}>In Progress</option>
                    <option ${c.status==="Resolved"?"selected":""}>Resolved</option>
                </select>
            </div>
        `;
    });
}

function updateStatus(index, newStatus) {
    let complaints = JSON.parse(localStorage.getItem("complaints"));
    complaints[index].status = newStatus;
    localStorage.setItem("complaints", JSON.stringify(complaints));
    loadComplaints();
}

loadComplaints();

</script>

</body>
</html>